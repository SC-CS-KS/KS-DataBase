# DB Integrity

## WhatIs
```md
	指数据的精确性（accuracy） 和可靠性（reliability）
		逻辑上的一致性、正确性、有效性和相容性
	应防止数据库中存在不符合语义规定的数据
		和防止因错误信息的输入输出造成无效操作或错误信息而提出的

	数据库完整性由各种各样的完整性约束来保证
		因此可以说数据库完整性设计就是数据库完整性约束的设计
	数据库完整性约束可以通过DBMS或应用程序来实现
		基于DBMS的完整性约束作为模式的一部分存入数据库中
	不同DBMS支持的数据库完整性基本相同
作用
	防止合法用户使用数据库时向数据库中添加不合语义的数据
	实现业务规则
		易于定义，容易理解，而且可以降低应用程序的复杂性，提高应用程序的运行效率
		是集中管理的，因此比应用程序更容易实现数据库的完整性
	合理的数据库完整性设计
		能够同时兼顾数据库的完整性和系统的效能
		比如装载大量数据时
			只要在装载之前临时使基于DBMS的数据库完整性约束失效
			此后再使其生效，就能保证既不影响数据装载的效率又能保证数据库的完整性
	在应用软件的功能测试中
		完善的数据库完整性有助于尽早发现应用软件的错误
```

## Integrity
* 实体完整性（Entity Integrity）
```md
	实体完整性指表中行的完整性
		主要用于保证操作的数据（记录）非空、唯一且不重复
	即实体完整性要求每个关系（表）有且仅有一个主键
		每一个主键值必须唯一，而且不允许为“空”（NULL）或重复。
```
* 域完整性（Domain Integrity）
```md
	指数据库表中的列必须满足某种特定的数据类型或约束
	其中约束又包括取值范围、精度等规定
		表中的CHECK、FOREIGN KEY 约束和DEFAULT、 NOT NULL定义都属于域完整性的范畴。
```
* 参照完整性（Referential Integrity）
```md
	属于表间规则
		对于永久关系的相关表，在更新、插入或删除记录时，如果只改其一，就会影响数据的完整性。
		对于更新、插入或删除表间数据的完整性，统称为参照完整性。
	如删除父表的某记录后，子表的相应记录未删除，致使这些记录称为孤立记录。
	通常，在客观现实中的实体之间存在一定联系
		在关系模型中实体及实体间的联系都是以关系进行描述
		因此，操作时就可能存在着关系与关系间的关联和引用。
	在关系数据库中
		关系之间的联系是通过公共属性实现的
			这个公共属性经常是一个表的主键，同时是另一个表的外键
	参照完整性体现在两个方面
		实现了表与表之间的联系
		外键的取值必须是另一个表的主键的有效值，或是“空”值
	参照完整性规则（Referential Integrity）要求
		若属性组F是关系模式R1的主键，同时F也是关系模式R2的外键，
		则在R2的关系中，F的取值只允许两种可能：空值或等于R1关系中某个主键值。
		R1称为“被参照关系”模式，R2称为“参照关系”模式。
	注意：
		在实际应用中，外键不一定与对应的主键同名。外键常用下划曲线标出。
```
* 用户定义完整性（User-defined Integrity）
```md
	是对数据表中字段属性的约束
	用户定义完整性规则（User-defined integrity）也称域完整性规则。
	包括字段的值域、字段的类型和字段的有效规则（如小数位数）等约束
		是由确定关系结构时所定义的字段的属性决定的。
	如，百分制成绩的取值范围在0~100之间等。
```

## 数据库完整性约束
```md
列级静态约束
元组级静态约束
关系级静态约束
列级动态约束
元组级动态约束
关系级动态约束
	动态约束通常由应用软件来实现
```